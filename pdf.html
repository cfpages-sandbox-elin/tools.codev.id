<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìï PDF Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="pdf.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js`;
    </script>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

</head>
<body class="bg-slate-100 font-sans">
    <div class="w-full max-w-5xl mx-auto p-4 sm:p-8 my-10 bg-white rounded-xl shadow-lg">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold text-slate-800">PDF Tools v1.53</h1>
            <p class="text-slate-500 mt-2">Choose a tool below to get started.</p>
        </div>

        <!-- Tab Navigation -->
        <div class="border-b border-gray-200 mb-6">
            <nav class="flex -mb-px justify-center" aria-label="Tabs">
                <button id="tab-split" class="tab-button active" role="tab" data-tab-key="split">‚úÇÔ∏è Split</button>
                <button id="tab-extract" class="tab-button" role="tab" data-tab-key="extract">üìë Extract</button>
                <button id="tab-delete" class="tab-button" role="tab" data-tab-key="delete">üóëÔ∏è Delete</button>
                <button id="tab-edit" class="tab-button" role="tab" data-tab-key="edit">‚úèÔ∏è Edit</button>
            </nav>
        </div>

        <!-- Tab Content -->
        <div id="tab-content-split">
            <!-- SPLIT TOOL UI -->
            <div class="text-center mb-4">
                <h2 class="text-2xl font-semibold text-slate-700">PDF Splitter</h2>
                <p class="text-slate-500 mt-1">Split a single long PDF page into multiple standard-sized pages.</p>
            </div>
            <div id="settings-section" class="grid grid-cols-1 md:grid-cols-3 gap-6 border-b pb-6 mb-6 items-start">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">1. Upload PDF</label>
                    <input id="file-upload" type="file" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100" accept=".pdf">
                    <p id="file-name" class="text-xs text-slate-500 mt-2 truncate"></p>
                </div>
                <div>
                    <label for="paper-size" class="block text-sm font-medium text-slate-700 mb-2">2. Target Paper Size</label>
                    <select id="paper-size" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                        <option value="A4">A4 (210 x 297 mm)</option>
                        <option value="A5">A5 (148 x 210 mm)</option>
                        <option value="Letter">Letter (8.5 x 11 in)</option>
                        <option value="Legal">Legal (8.5 x 14 in)</option>
                        <option value="F4">F4 (210 x 330 mm)</option>
                        <option value="FreeForm">Free Form</option>
                    </select>
                </div>
                <div>
                    <label for="margin-select" class="block text-sm font-medium text-slate-700 mb-2">3. Top/Bottom Margin</label>
                    <select id="margin-select" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                        <option value="18">Narrow (18 pts / 0.25")</option>
                        <option value="36" selected>Normal (36 pts / 0.5")</option>
                        <option value="72">Wide (72 pts / 1.0")</option>
                        <option value="custom">Custom</option>
                    </select>
                    <input type="number" id="custom-margin-input" value="36" class="hidden mt-2 w-full pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                </div>
            </div>
            <div id="action-bar" class="flex items-center justify-center space-x-4 mb-6">
                <button id="add-cut-line-button" type="button" class="hidden px-6 py-3 border border-gray-300 text-base font-medium rounded-md shadow-sm text-slate-700 bg-white hover:bg-slate-50">Add Split Line</button>
                <button id="split-view-toggle" type="button" class="hidden px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700">Toggle Split View</button>
                <button id="generate-button" type="button" class="hidden px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700">Create Final PDF</button>
                <a id="download-link" class="hidden px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700">Download Split PDF</a>
            </div>
            <div id="status" class="text-center mb-4 min-h-[2rem]"></div>
            <div id="preview-section" class="hidden">
                <h3 class="text-lg font-semibold text-slate-700 mb-2 text-center">4. Adjust, Confirm, and Omit Pages</h3>
                <div class="text-sm text-slate-500 text-center mb-2">
                    <p>‚Ä¢ Drag red lines to adjust. Click to confirm (turns green). Click green to unconfirm.</p>
                    <p>‚Ä¢ Click the ‚ùå button on a page to omit it from the final PDF. Click again to include it.</p>
                </div>
                <div id="preview-container" class="relative w-full max-h-[80vh] overflow-y-auto border-2 border-slate-300 bg-slate-200">
                    <div id="pages-container"></div>
                </div>
            </div>
        </div>

        <div id="tab-content-extract" class="hidden">
            <!-- EXTRACT TOOL UI -->
            <div class="text-center mb-4">
                <h2 class="text-2xl font-semibold text-slate-700">Page Extractor</h2>
                <p class="text-slate-500 mt-1">Select pages or page ranges from one or more PDFs to create new documents.</p>
            </div>
            <div class="border-b pb-6 mb-6">
                <label class="block text-sm font-medium text-slate-700 mb-2">1. Upload PDF(s) or ZIP</label>
                <input id="extract-file-upload" type="file" multiple class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100" accept=".pdf,.zip">
            </div>
            <div id="extract-files-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"></div>
            <div class="flex items-center justify-center mb-6">
                <button id="extract-button" type="button" disabled class="px-8 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-slate-400 disabled:cursor-not-allowed">Extract Pages</button>
            </div>
            <div id="extract-status" class="text-center mb-4 min-h-[2rem]"></div>
            <div id="extract-results" class="text-center"></div>
        </div>
        
        <div id="tab-content-delete" class="hidden">
            <!-- DELETE TOOL UI -->
            <div class="text-center mb-4">
                <h2 class="text-2xl font-semibold text-slate-700">Page Deleter</h2>
                <p class="text-slate-500 mt-1">Upload a PDF, select the pages you want to remove, and download the new file.</p>
            </div>
            <div class="border-b pb-6 mb-6">
                <label class="block text-sm font-medium text-slate-700 mb-2">1. Upload PDF</label>
                <input id="delete-file-upload" type="file" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100" accept=".pdf">
            </div>
            <div id="delete-action-bar" class="flex items-center justify-center space-x-4 mb-6 hidden">
                <button id="delete-button" type="button" disabled class="px-8 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-slate-400 disabled:cursor-not-allowed">
                    Delete Selected Pages
                </button>
                <!-- The download button will be dynamically added here -->
            </div>
            <div id="delete-status" class="text-center mb-4 min-h-[2rem]"></div>
            <div id="delete-preview-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                <!-- Page previews will be rendered here -->
            </div>
            <div id="delete-results" class="text-center mt-6"></div>
        </div>

        <div id="tab-content-edit" class="hidden">
            <!-- EDIT TOOL UI -->
            <div class="text-center mb-4">
                <h2 class="text-2xl font-semibold text-slate-700">PDF Editor</h2>
                <p class="text-slate-500 mt-1">Draw, add images, and add text to your PDF pages.</p>
            </div>
            <div class="border-b pb-6 mb-6">
                <label class="block text-sm font-medium text-slate-700 mb-2">1. Upload PDF</label>
                <input id="edit-file-upload" type="file" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100" accept=".pdf">
            </div>
            
            <div id="edit-toolbar" class="hidden sticky top-0 bg-white/80 backdrop-blur-sm z-30 p-2 rounded-lg shadow-md mb-6 items-center justify-center gap-2 sm:gap-3 flex-wrap">
    
                <!-- Tool Selection -->
                <button id="edit-tool-brush" title="Brush" class="p-2 border rounded-md hover:bg-slate-100 active-tool"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3H5.5C4.67,3 4,3.67 4,4.5V19.5C4,20.33 4.67,21 5.5,21H18.5C19.33,21 20,20.33 20,19.5V7.34C20,7.08 20.09,6.83 20.29,6.63L20.71,6.21C21.1,5.82 21.1,5.19 20.71,4.8L20.71,5.63Z M6.5,18.5H16.5V19.5H6.5V18.5Z M17.5,14.5H6.5V12.5H17.5V14.5Z M17.5,10.5H6.5V8.5H17.5V10.5Z M17.5,6.5H6.5V4.5H17.5V6.5Z"/></svg></button>
                <button id="edit-tool-text" title="Text" class="p-2 border rounded-md hover:bg-slate-100 font-bold text-lg w-9 h-9 flex items-center justify-center">T</button>
                <label for="edit-image-upload" title="Add Image" class="p-2 border rounded-md hover:bg-slate-100 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z" /></svg></label>
                <button id="edit-tool-eyedropper" title="Eyedropper" class="p-2 border rounded-md hover:bg-slate-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M11.5,2C6.81,2 3,5.81 3,10.5C3,12.58 3.84,14.47 5,15.93V19.5C5,20.05 5.45,20.5 6,20.5H9.5C10.05,20.5 10.5,20.05 10.5,19.5V19.03C10.82,19.01 11.16,19 11.5,19C16.19,19 20,15.19 20,10.5C20,5.81 16.19,2 11.5,2M11.5,4A6.5,6.5 0 0,1 18,10.5A6.5,6.5 0 0,1 11.5,17A6.5,6.5 0 0,1 5,10.5A6.5,6.5 0 0,1 11.5,4Z" /></svg></button>
                <button id="edit-tool-eraser" title="Eraser" class="p-2 border rounded-md hover:bg-slate-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M22.7,19.4C22.7,19.4 22.7,19.4 22.7,19.4L20.4,17.1L18.9,18.6L21.2,20.9C21.6,21.3 22.2,21.3 22.6,20.9L22.7,20.8C23.1,20.4 23.1,19.8 22.7,19.4M4.1,19.8L17.3,6.5L15.8,5L2.6,18.2L4.1,19.8M18.4,2.1L14.4,6.1L16.2,7.9L20.2,3.9L18.4,2.1M13.3,10.7L11.5,8.9L7.4,13L9.2,14.8L13.3,10.7Z" /></svg></button>

                <!-- Vertical Separator -->
                <div class="h-8 w-px bg-slate-300 mx-2"></div>

                <!-- Font & Size Controls -->
                <select id="edit-font-select" class="h-10 border-gray-300 rounded-md text-sm">
                    <option value="Helvetica">Helvetica</option>
                    <option value="Times-Roman">Times New Roman</option>
                    <option value="Courier">Courier</option>
                    <option value="Roboto">Roboto</option>
                    <option value="Open Sans">Open Sans</option>
                    <option value="Lato">Lato</option>
                    <option value="Montserrat">Montserrat</option>
                </select>
                <input type="color" id="edit-color-picker" value="#ef4444" class="w-9 h-9 border-none rounded-md cursor-pointer p-1 bg-white border border-gray-300">
                <div class="flex items-center">
                    <input type="range" id="edit-size-slider" min="1" max="50" value="5" class="w-24 sm:w-32">
                    <span id="edit-size-label" class="text-sm w-8 text-center tabular-nums text-slate-600">5</span>
                </div>
                
                <!-- Vertical Separator -->
                <div class="h-8 w-px bg-slate-300 mx-2"></div>

                <!-- Save Button -->
                <button id="edit-save-button" class="px-5 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700">Save</button>
            </div>

            <div id="edit-status" class="text-center mb-4 min-h-[2rem]"></div>
            
            <div id="edit-preview-container" class="w-full max-h-[80vh] overflow-y-auto border-2 border-slate-200 bg-slate-100 p-4">
                 <!-- PDF pages will be rendered here as canvases -->
                 <div class="text-center text-slate-500">Upload a PDF to begin editing.</div>
            </div>
        </div>

        <!-- NEW: Hidden input for image uploads -->
        <input type="file" id="edit-image-upload" class="hidden" accept="image/png, image/jpeg">
    </div>
<script>
// Simple Tab-switching logic with localStorage
document.addEventListener('DOMContentLoaded', () => {
    const tabs = {};
    document.querySelectorAll('.tab-button').forEach(button => {
        const key = button.dataset.tabKey;
        tabs[key] = {
            button: button,
            content: document.getElementById(`tab-content-${key}`)
        };
    });

    function switchTab(activeTabKey) {
        Object.keys(tabs).forEach(key => {
            const isActive = key === activeTabKey;
            tabs[key].button.classList.toggle('active', isActive);
            if (tabs[key].content) {
                tabs[key].content.classList.toggle('hidden', !isActive);
            }
        });
        // Save the active tab to localStorage
        localStorage.setItem('pdfToolsLastTab', activeTabKey);
    }

    Object.keys(tabs).forEach(key => {
        tabs[key].button.addEventListener('click', () => switchTab(key));
    });

    // On page load, restore the last active tab
    const lastTab = localStorage.getItem('pdfToolsLastTab');
    if (lastTab && tabs[lastTab]) {
        switchTab(lastTab);
    } else {
        switchTab('split'); // Default to 'split' tab
    }
});
</script>

<script src="pdf-split.js" defer></script>
<script src="pdf-extract.js" defer></script>
<script src="pdf-delete.js" defer></script>
<script src="pdf-edit.js" defer></script>
</body>
</html>